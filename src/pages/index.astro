---
import Layout from '../layouts/Layout.astro';
import questions from '../data/questions.json';
---

<Layout title="Leben in Deutschland - Master the Exam">
	<!-- Navigation -->
	<nav class="container mx-auto px-4 py-6 flex items-center justify-between relative z-10">
		<div class="flex items-center gap-3">
			<div class="w-10 h-10 bg-yellow-400 rounded-lg flex items-center justify-center text-2xl shadow-lg">ðŸ‡©ðŸ‡ª</div>
			<span class="font-bold text-xl text-gray-900">Leben in Deutschland</span>
		</div>
		<div class="hidden md:flex gap-6 text-sm font-medium text-gray-600">
			<a href="/terms-of-service" class="hover:text-blue-600 transition-colors">Terms of Service</a>
			<a href="/datenschutz" class="hover:text-blue-600 transition-colors">Privacy Policy</a>
			<a href="/subscription-terms" class="hover:text-blue-600 transition-colors">Subscription Terms</a>
		</div>
	</nav>

	<main>
		<!-- HERO SECTION -->
		<div class="container mx-auto px-4 py-16 lg:py-24 text-center">
			<div class="inline-flex items-center gap-2 bg-yellow-50 border border-yellow-200 px-4 py-1.5 rounded-full mb-8">
				<span class="text-xs font-semibold uppercase tracking-wider text-yellow-800">App Store</span>
				<div class="flex text-yellow-500 text-sm">â˜…â˜…â˜…â˜…â˜…</div>
				<span class="text-xs font-bold text-gray-900">5.0</span>
			</div>
			
			<h1 class="text-5xl lg:text-7xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-600 mb-6 tracking-tight">
				Leben in Deutschland
			</h1>
			
			<p class="text-xl text-gray-600 max-w-2xl mx-auto mb-10 leading-relaxed">
				Get access to all <b>300 official questions</b> and <b>10 state-specific questions</b>. 
				Study smarter and boost your chances of success with the most up-to-date content!
			</p>

			<div class="flex flex-col sm:flex-row items-center justify-center gap-4 mb-20">
				<a href="#" class="bg-black text-white px-8 py-4 rounded-xl flex items-center gap-3 hover:bg-gray-800 transition-all transform hover:scale-105 shadow-xl">
					<svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor"><path d="M17.65 1.48a6.3 6.3 0 00-1.57 5.06 6.3 6.3 0 005.17 1.47 6.28 6.28 0 001.5-5A6.35 6.35 0 0017.65 1.48zm-2.02 6.06c-3.14 0-5.74-1.78-5.74-4.83 0-4.04 3.7-6.04 6.9-6.04 1.13 0 2.27.27 3.3.8-.46.33-1.07.72-1.37.95-1.92-1.12-4.18-1.07-5.9.36-1.52 1.26-1.99 3.12-1.14 4.88.54 1.12 1.5 2.5 3.96 3.88zM18.8 24c-1.2 0-2.38-.63-3.47-1.42-.9.66-2.03 1.42-3.3 1.42C5.9 24 0 18.03 0 10.7 0 5.4 3.4 1.63 7.85 1.63c1.7 0 3.08.7 3.96 1.43.94-.78 2.5-1.43 4.2-1.43 2.13 0 4.14.86 5.6 2.4-5.22 2.76-4.5 9.77.83 12.03-.84 2.58-2.67 5.75-4.55 7.94h.9z"/></svg>
					<div class="text-left">
						<div class="text-[10px] font-medium opacity-80 uppercase">Download on the</div>
						<div class="text-sm font-bold leading-none">App Store</div>
					</div>
				</a>
				<a href="#" class="bg-black text-white px-8 py-4 rounded-xl flex items-center gap-3 hover:bg-gray-800 transition-all transform hover:scale-105 shadow-xl">
					<svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor"><path d="M3.6 21.6l12.9-7.2-12.9-7.2v14.4zm1.2-16.7l12.8 7.1-1.3.7-11.5-6.4v-1.4zm15.7 8.5l-1.9-1.1-13.8-7.7c-.5-.3-1.1-.3-1.6 0-.5.3-.8.8-.8 1.4v12c0 .6.3 1.1.8 1.4.2.1.5.2.8.2.3 0 .6-.1.8-.2l13.8-7.7c.5-.3.8-.8.8-1.4 0-.5-.3-1.1-.8-1.3z"/></svg>
					<div class="text-left">
						<div class="text-[10px] font-medium opacity-80 uppercase">Get it on</div>
						<div class="text-sm font-bold leading-none">Google Play</div>
					</div>
				</a>
			</div>

			<!-- Phone Mockup Carousel -->
			<div class="relative max-w-6xl mx-auto mb-32 overflow-hidden">
				<!-- Fade Gradients -->
				<div class="absolute left-0 top-0 bottom-0 w-20 bg-gradient-to-r from-white to-transparent z-20 pointer-events-none hidden md:block"></div>
				<div class="absolute right-0 top-0 bottom-0 w-20 bg-gradient-to-l from-white to-transparent z-20 pointer-events-none hidden md:block"></div>

				<div class="flex overflow-x-auto snap-x snap-mandatory pb-12 gap-8 px-4 md:justify-center no-scrollbar" style="scrollbar-width: none; -ms-overflow-style: none;">
					
					<!-- Card 1: Statistics -->
					<div class="snap-center shrink-0 transform transition-transform duration-500 hover:scale-105">
						<div class="bg-gray-900 rounded-[2rem] p-3 w-[280px] h-[580px] shadow-2xl border-4 border-gray-800 bg-opacity-90 backdrop-blur">
							<div class="bg-purple-100 w-full h-full rounded-[1.5rem] flex flex-col overflow-hidden">
								<div class="bg-purple-200 h-12 flex items-center justify-center font-bold text-purple-800 text-sm">Statistik</div>
								<div class="p-6 flex-1 flex flex-col items-center justify-center space-y-4">
									<div class="w-32 h-32 rounded-full border-[12px] border-purple-300 border-t-purple-600 rotation-45"></div>
									<div class="w-full space-y-2">
										<div class="h-2 bg-purple-200 rounded w-3/4 mx-auto"></div>
										<div class="h-2 bg-purple-200 rounded w-1/2 mx-auto"></div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Card 2: Main Home (Center) -->
					<div class="snap-center shrink-0 transform transition-transform duration-500 scale-105 z-10">
						<div class="bg-gray-900 rounded-[2.5rem] p-3 w-[300px] h-[620px] shadow-2xl border-8 border-gray-800">
							<div class="bg-white w-full h-full rounded-[2rem] overflow-hidden flex flex-col relative">
								<div class="bg-purple-600 h-32 p-6 text-white text-left">
									<div class="text-sm opacity-80 mb-1">Willkommen Alex!</div>
									<div class="text-xl font-bold">Startseite</div>
								</div>
								<div class="p-4 grid grid-cols-2 gap-3 mt-4">
									{[1,2,3,4,5,6].map(_ => (
										<div class="bg-purple-50 rounded-xl aspect-square flex flex-col items-center justify-center shadow-sm">
											<div class="w-10 h-10 bg-purple-100 rounded-full mb-2"></div>
											<div class="h-2 bg-purple-200 rounded w-12"></div>
										</div>
									))}
								</div>
							</div>
						</div>
					</div>

					<!-- Card 3: Question View -->
					<div class="snap-center shrink-0 transform transition-transform duration-500 hover:scale-105">
						<div class="bg-gray-900 rounded-[2rem] p-3 w-[280px] h-[580px] shadow-2xl border-4 border-gray-800 bg-opacity-90 backdrop-blur">
							<div class="bg-indigo-50 w-full h-full rounded-[1.5rem] flex flex-col">
								<div class="p-4 w-full flex-1">
									<div class="h-2 w-full bg-indigo-200 rounded mb-6"></div>
									<div class="h-24 bg-indigo-100 rounded-xl mb-4 w-full flex items-center p-4">
										<div class="text-xs text-indigo-800 font-medium">In Deutschland dÃ¼rfen Menschen offen...</div>
									</div>
									<div class="space-y-2">
										<div class="h-10 bg-white rounded-lg w-full shadow-sm border border-indigo-100"></div>
										<div class="h-10 bg-indigo-500 rounded-lg w-full shadow-sm"></div>
										<div class="h-10 bg-white rounded-lg w-full shadow-sm border border-indigo-100"></div>
										<div class="h-10 bg-white rounded-lg w-full shadow-sm border border-indigo-100"></div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Card 4: Practice Mode -->
					<div class="snap-center shrink-0 transform transition-transform duration-500 hover:scale-105">
						<div class="bg-gray-900 rounded-[2rem] p-3 w-[280px] h-[580px] shadow-2xl border-4 border-gray-800 bg-opacity-90 backdrop-blur">
							<div class="bg-green-50 w-full h-full rounded-[1.5rem] flex flex-col">
								<div class="bg-green-100 h-12 flex items-center justify-center font-bold text-green-800 text-sm">Ãœben</div>
								<div class="p-4 w-full flex-1">
									<div class="h-20 bg-green-100 rounded-xl mb-4 w-full"></div>
									<div class="space-y-2">
										<div class="h-10 bg-green-200 rounded-lg w-full"></div>
										<div class="h-10 bg-green-200 rounded-lg w-full"></div>
									</div>
								</div>
							</div>
						</div>
					</div>

				</div>
				
				<!-- Scroll Indicators -->
				<div class="absolute bottom-4 left-0 right-0 flex justify-center gap-2">
					<div class="w-2 h-2 rounded-full bg-gray-300"></div>
					<div class="w-2 h-2 rounded-full bg-gray-800"></div>
					<div class="w-2 h-2 rounded-full bg-gray-300"></div>
				</div>
			</div>
		</div>

		<!-- FEATURES SECTION -->
		<div class="bg-white py-24">
			<div class="container mx-auto px-4 text-center">
				<div class="bg-black text-white text-xs font-bold px-4 py-2 rounded-full inline-block mb-6 uppercase tracking-widest">How It Works</div>
				<h2 class="text-4xl font-bold text-gray-900 mb-16 max-w-2xl mx-auto">3 modes to master the exam: Learn, Practice, and Exam</h2>
				
				<div class="grid md:grid-cols-2 gap-12 max-w-5xl mx-auto items-center">
					<div class="bg-[#FFFBF4] rounded-3xl p-10 h-full flex flex-col items-center">
						<h3 class="text-2xl font-bold mb-4">Learn Mode</h3>
						<p class="text-gray-600 mb-8">Explore all questions with correct answers shown instantly to build your knowledge.</p>
						<div class="bg-gray-900 rounded-[2rem] p-2 w-48 shadow-xl rotate-[-2deg]">
							<div class="bg-purple-50 rounded-[1.8rem] h-80 w-full"></div>
						</div>
					</div>
					<div class="bg-[#FFFBF4] rounded-3xl p-10 h-full flex flex-col items-center">
						<h3 class="text-2xl font-bold mb-4">Practice Mode</h3>
						<p class="text-gray-600 mb-8">Test yourself without seeing the answers to focus on your recall and understanding.</p>
						<div class="bg-gray-900 rounded-[2rem] p-2 w-48 shadow-xl rotate-[2deg]">
							<div class="bg-green-50 rounded-[1.8rem] h-80 w-full"></div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- TESTIMONIALS -->
		<div class="py-24 bg-[#FFFBF4]">
			<div class="container mx-auto px-4 text-center">
				<h2 class="text-3xl font-bold mb-12">Trusted by 10,000+ members<br/>all over the world.</h2>
				<div class="grid md:grid-cols-3 gap-6 max-w-6xl mx-auto text-left">
					{[
						{ text: "This app has been a game-changer for my daily routine. The guided structure is effective.", name: "Emily R." },
						{ text: "I've tried several apps, but this one stands out because of its focus on clarity. Highly recommended!", name: "Sara Lewis" },
						{ text: "The variety of modes keeps me coming back every day. I appreciate the focus on both mind and body.", name: "Alex P." }
					].map((t, i) => (
						<div class="bg-white p-8 rounded-2xl shadow-sm hover:shadow-md transition-shadow">
							<p class="text-gray-600 mb-6 leading-relaxed">"{t.text}"</p>
							<div class="flex items-center gap-3">
								<div class="w-10 h-10 bg-gray-200 rounded-full"></div>
								<span class="font-bold text-gray-900">{t.name}</span>
							</div>
						</div>
					))}
				</div>
			</div>
		</div>

		<!-- WEB UTILITY SECTION (Search & State Links) -->
		<div class="bg-white py-24 border-t border-gray-100">
			<div class="container mx-auto px-4">
				<div class="text-center mb-16">
					<h2 class="text-3xl font-bold mb-4">Try it on the Web</h2>
					<p class="text-gray-600">You can also browse all {questions.length} questions directly here.</p>
				</div>
				
				<!-- State Links -->
				<div class="mb-12">
					<h3 class="text-sm font-semibold mb-4 text-center uppercase tracking-wider text-gray-400">Select Federal State</h3>
					<div class="flex flex-wrap justify-center gap-2">
						{[
							'Baden-WÃ¼rttemberg', 'Bayern', 'Berlin', 'Brandenburg', 'Bremen', 
							'Hamburg', 'Hessen', 'Mecklenburg-Vorpommern', 'Niedersachsen', 
							'Nordrhein-Westfalen', 'Rheinland-Pfalz', 'Saarland', 'Sachsen', 
							'Sachsen-Anhalt', 'Schleswig-Holstein', 'ThÃ¼ringen'
						].map(state => {
							const slug = state.toLowerCase()
								.replace(/Ã¼/g, 'ue')
								.replace(/Ã¶/g, 'oe')
								.replace(/Ã¤/g, 'ae')
								.replace(/ÃŸ/g, 'ss')
								.replace(/\s+/g, '-');
							return (
								<a href={`/${slug}-fragen`} class="px-3 py-1.5 bg-gray-50 border border-gray-200 rounded-lg text-xs font-medium hover:border-blue-500 hover:text-blue-600 transition-colors">
									{state}
								</a>
							);
						})}
					</div>
				</div>

				<!-- Search & Filter Section -->
				<div class="max-w-xl mx-auto mb-10">
					<div class="relative">
						<input 
							type="text" 
							id="searchInput"
							placeholder="Search for questions (Type ID or Text)..." 
							class="w-full px-5 py-4 rounded-xl border border-gray-200 bg-gray-50 focus:bg-white focus:ring-2 focus:ring-black focus:border-black outline-none transition-all shadow-sm text-lg"
						/>
						<svg class="w-6 h-6 text-gray-400 absolute right-4 top-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
						</svg>
					</div>
				</div>

				<div id="questionsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6">
					{questions.map((q) => (
						<a href={`/frage/${q.id}`} class="question-card block group" data-question={q.q_de.toLowerCase()} data-id={q.id}>
							<div class="bg-white p-5 rounded-xl border border-gray-100 hover:border-blue-500 hover:shadow-lg transition-all h-full flex flex-col group-hover:-translate-y-1">
								<div class="flex items-center justify-between mb-3">
									<span class="text-xs font-bold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-md">#{q.id}</span>
									<span class="text-[10px] font-semibold text-gray-500 uppercase tracking-wide bg-gray-50 px-2 py-1 rounded">{q.area}</span>
								</div>
								<h2 class="text-base font-medium text-gray-900 group-hover:text-blue-600 transition-colors line-clamp-3 leading-relaxed">
									{q.q_de}
								</h2>
							</div>
						</a>
					))}
				</div>
				
				<div id="noResults" class="hidden text-center py-20 text-gray-400">
					<p class="text-xl font-medium">No results found.</p>
					<p class="text-sm">Try searching for a different keyword or question ID.</p>
				</div>
			</div>
		</div>

		<!-- FOOTER -->
		<footer class="bg-white border-t border-gray-100 py-12">
			<div class="container mx-auto px-4 text-center">
				<div class="flex flex-col md:flex-row justify-center items-center gap-8 text-sm text-gray-500 mb-8">
					<a href="/terms-of-service" class="hover:text-black transition-colors">Terms of Service</a>
					<a href="/datenschutz" class="hover:text-black transition-colors">Privacy Policy</a>
					<a href="/subscription-terms" class="hover:text-black transition-colors">Subscription Terms</a>
					<a href="#" class="hover:text-black transition-colors">Support</a>
				</div>
				<p class="text-xs text-gray-400">&copy; {new Date().getFullYear()} Leben in Deutschland. All rights reserved.</p>
			</div>
		</footer>

	</main>
</Layout>

<script>
	const searchInput = document.getElementById('searchInput');
	const cards = document.querySelectorAll('.question-card');
	const noResults = document.getElementById('noResults');

	searchInput?.addEventListener('input', (e) => {
		const term = (e.target as HTMLInputElement).value.toLowerCase();
		let visibleCount = 0;

		cards.forEach((card) => {
			const text = (card as HTMLElement).dataset.question || '';
			const id = (card as HTMLElement).dataset.id || '';
			
			if (text.includes(term) || id.includes(term)) {
				(card as HTMLElement).style.display = 'block';
				visibleCount++;
			} else {
				(card as HTMLElement).style.display = 'none';
			}
		});

		if (noResults) {
			noResults.style.display = visibleCount === 0 ? 'block' : 'none';
		}
	});
</script>
