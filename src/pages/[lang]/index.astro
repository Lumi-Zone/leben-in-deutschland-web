---
import Layout from '../../layouts/Layout.astro';
import questions from '../../data/questions.json';
import { useTranslations } from '../../i18n/ui';
import PhoneSlider from '../../components/PhoneSlider';
import ReviewsSlider from '../../components/ReviewsSlider';

export function getStaticPaths() {
  const supportedLangs = ['de', 'en', 'tr', 'ar', 'ua', 'ru', 'pl', 'fa', 'ps', 'ro', 'it', 'es'];
  return supportedLangs.map(lang => ({ params: { lang }, props: { lang } }));
}

const { lang } = Astro.props;
const t = useTranslations(lang as any);
import Header from '../../components/Header.astro';

// Helper for base url
const getPath = (path: string) => {
    const base = import.meta.env.BASE_URL;
    const p = path.startsWith('/') ? path.slice(1) : path;
    return `${base}${p}`;
};
---

<Layout title={`${t("hero.title")} - Master the Exam`} lang={lang}>
	<!-- Navigation -->
	<Header lang={lang} />

	<main>
		<!-- HERO SECTION -->
		<div class="container mx-auto px-4 py-16 lg:py-24 text-center">
			<div class="inline-flex items-center gap-3 bg-yellow-50 border border-yellow-200 px-6 py-2.5 rounded-full mb-10 shadow-sm transition-transform hover:scale-105 cursor-default">
				<span class="text-sm font-bold uppercase tracking-widest text-yellow-900">{t("hero.badge")}</span>
				<div class="flex text-yellow-500 text-base">★★★★★</div>
				<span class="text-base font-extrabold text-gray-900">4.8</span>
			</div>
			
			<h1 class="text-5xl lg:text-7xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-600 mb-6 tracking-tight">
				{t("hero.title")}
			</h1>
			
			<p class="text-xl text-gray-600 max-w-2xl mx-auto mb-10 leading-relaxed" set:html={t("hero.subtitle")}>
			</p>

			<div class="flex flex-col sm:flex-row items-center justify-center gap-4 mb-20">
				<a href="https://apps.apple.com/tr/app/leben-in-deutschland-2026/id6723899981" class="bg-black text-white px-6 py-3 rounded-xl flex items-center gap-3 hover:bg-gray-800 transition-all transform hover:scale-105 shadow-xl border border-gray-800 group">
					<img src="https://cdn.simpleicons.org/apple/white" width="32" height="32" alt="Apple Logo" class="w-8 h-8 group-hover:opacity-90 transition-opacity" />
					<div class="text-left">
						<div class="text-[10px] font-medium opacity-80 uppercase leading-none mb-1">{t("hero.download_apple")}</div>
						<div class="text-lg font-bold leading-none -mt-0.5 font-sans">App Store</div>
					</div>
				</a>
				<a href="https://play.google.com/store/apps/details?id=com.einbuergerungapp" class="bg-black text-white px-6 py-3 rounded-xl flex items-center gap-3 hover:bg-gray-800 transition-all transform hover:scale-105 shadow-xl border border-gray-800 group">
					<img src="https://cdn.simpleicons.org/googleplay/white" width="30" height="30" alt="Google Play Logo" class="w-7 h-7 group-hover:opacity-90 transition-opacity" />
					<div class="text-left">
						<div class="text-[10px] font-medium opacity-80 uppercase leading-none mb-1">{t("hero.download_google")}</div>
						<div class="text-lg font-bold leading-none -mt-0.5 font-sans">Google Play</div>
					</div>
				</a>
			</div>

			<!-- Phone Mockup Carousel -->
			<!-- Phone Mockup Carousel -->
			<div class="mb-32">
				<PhoneSlider client:load />
			</div>
    </div>
    
    <!-- Feature Cards -->
    <section id="features" class="scroll-mt-24 mb-16">
      <div class="container mx-auto px-4 text-center">
				<div class="bg-black text-white text-xs font-bold px-4 py-2 rounded-full inline-block mb-6 uppercase tracking-widest">{t("features.badge")}</div>
				<h2 class="text-4xl font-bold text-gray-900 mb-16 max-w-2xl mx-auto">{t("features.title")}</h2>
				
				<div class="grid md:grid-cols-2 gap-12 max-w-5xl mx-auto items-center">
					<div class="bg-[#FFFBF4] rounded-3xl p-10 h-full flex flex-col items-center">
						<h3 class="text-2xl font-bold mb-4">{t("features.learn.title")}</h3>
						<p class="text-gray-600 mb-8">{t("features.learn.desc")}</p>
					</div>
					<div class="bg-[#FFFBF4] rounded-3xl p-10 h-full flex flex-col items-center">
						<h3 class="text-2xl font-bold mb-4">{t("features.practice.title")}</h3>
						<p class="text-gray-600 mb-8">{t("features.practice.desc")}</p>
					</div>
				</div>
			</div>
		</section>

		<!-- REVIEWS SECTION -->
		<ReviewsSlider client:visible lang={lang} />

        <!-- SAMPLE QUESTIONS SECTION -->
        <section class="py-20">
            <div class="container mx-auto px-4 text-center">
                <h3 class="text-2xl font-bold mb-8">{t("home.sample_questions")} ({questions.length})</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
                    {questions.slice(0, 6).map((q) => {
                            const qTitle = (q as any)[`q_${lang}`] || q.q_de;
                            return (
                            <a href={getPath(`${lang}/frage/${q.id}`)} class="block group">
                                <div class="bg-white p-5 rounded-xl border border-gray-100 hover:border-blue-500 hover:shadow-lg transition-all h-full flex flex-col group-hover:-translate-y-1">
                                    <div class="flex items-center justify-between mb-3">
                                        <span class="text-xs font-bold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-md">#{q.id}</span>
                                        <span class="text-[10px] font-semibold text-gray-500 uppercase tracking-wide bg-gray-50 px-2 py-1 rounded">{q.area}</span>
                                    </div>
                                    <h2 class="text-base font-medium text-gray-900 group-hover:text-blue-600 transition-colors line-clamp-3 leading-relaxed">
                                        {qTitle}
                                    </h2>
                                </div>
                            </a>
                            );
                    })}
                </div>
                    <div class="mt-8">
                        <a href={getPath(`${lang}/frage/1`)} class="text-blue-600 hover:underline font-bold">{t("home.start_quiz")} →</a>
                    </div>
            </div>
        </section>

		<!-- FOOTER -->
		<footer class="bg-white border-t border-gray-100 py-12">
			<div class="container mx-auto px-4 text-center">
				<div class="flex flex-col md:flex-row justify-center items-center gap-8 text-sm text-gray-500 mb-8">
					<a href={getPath(`${lang}/terms-of-service`)} class="hover:text-black transition-colors">{t("nav.tos")}</a>
					<a href={getPath(`${lang}/datenschutz`)} class="hover:text-black transition-colors">{t("nav.privacy")}</a>
					<a href={getPath(`${lang}/subscription-terms`)} class="hover:text-black transition-colors">{t("nav.subscription")}</a>
                    <a href={getPath(`${lang}/blog`)} class="hover:text-black transition-colors font-semibold text-blue-600">Blog</a>
					<a href="#" class="hover:text-black transition-colors">Support</a>
                    <a href="https://x.com/300Fragen" target="_blank" rel="noopener noreferrer" class="hover:text-black transition-colors flex items-center gap-1">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                        Follow us
                    </a>
				</div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-xs text-gray-400 mb-8 pt-8 border-t border-gray-100">
                    <a href={getPath(`${lang}/baden-wuerttemberg-fragen`)} class="hover:text-gray-600 transition-colors">Baden-Württemberg</a>
                    <a href={getPath(`${lang}/bayern-fragen`)} class="hover:text-gray-600 transition-colors">Bayern</a>
                    <a href={getPath(`${lang}/berlin-fragen`)} class="hover:text-gray-600 transition-colors">Berlin</a>
                    <a href={getPath(`${lang}/brandenburg-fragen`)} class="hover:text-gray-600 transition-colors">Brandenburg</a>
                    <a href={getPath(`${lang}/bremen-fragen`)} class="hover:text-gray-600 transition-colors">Bremen</a>
                    <a href={getPath(`${lang}/hamburg-fragen`)} class="hover:text-gray-600 transition-colors">Hamburg</a>
                    <a href={getPath(`${lang}/hessen-fragen`)} class="hover:text-gray-600 transition-colors">Hessen</a>
                    <a href={getPath(`${lang}/mecklenburg-vorpommern-fragen`)} class="hover:text-gray-600 transition-colors">Mecklenburg-Vorpommern</a>
                    <a href={getPath(`${lang}/niedersachsen-fragen`)} class="hover:text-gray-600 transition-colors">Niedersachsen</a>
                    <a href={getPath(`${lang}/nordrhein-westfalen-fragen`)} class="hover:text-gray-600 transition-colors">Nordrhein-Westfalen</a>
                    <a href={getPath(`${lang}/rheinland-pfalz-fragen`)} class="hover:text-gray-600 transition-colors">Rheinland-Pfalz</a>
                    <a href={getPath(`${lang}/saarland-fragen`)} class="hover:text-gray-600 transition-colors">Saarland</a>
                    <a href={getPath(`${lang}/sachsen-fragen`)} class="hover:text-gray-600 transition-colors">Sachsen</a>
                    <a href={getPath(`${lang}/sachsen-anhalt-fragen`)} class="hover:text-gray-600 transition-colors">Sachsen-Anhalt</a>
                    <a href={getPath(`${lang}/schleswig-holstein-fragen`)} class="hover:text-gray-600 transition-colors">Schleswig-Holstein</a>
                    <a href={getPath(`${lang}/thueringen-fragen`)} class="hover:text-gray-600 transition-colors">Thüringen</a>
                </div>
				<p class="text-xs text-gray-400">&copy; {new Date().getFullYear()} Leben in Deutschland. {t("footer.rights")}</p>
			</div>
		</footer>

	</main>
</Layout>
